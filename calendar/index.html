<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Notion Calendar</title>

<style>
:root{
  --ink:#111;
  --radius:18px;
  --base-w: 560;      /* design width reference */
  --base-h: 520;      /* design height reference */
  --scale: 1;         /* will be set by JS */
}

/* ✅ kill scrollbars inside Notion iframe */
html, body{
  width:100%;
  height:100%;
  margin:0;
  overflow:hidden;
  background:transparent;
  font-family:"Comic Sans MS","Patrick Hand","Segoe UI",sans-serif;
  color:var(--ink);
}

*{ box-sizing:border-box; }

/* Stage takes iframe size */
.stage{
  width:100vw;
  height:100vh;
  display:grid;
  place-items:center;
  overflow:hidden;
}

/* This box is scaled to fit */
.scale-root{
  width: calc(var(--base-w) * 1px);
  height: calc(var(--base-h) * 1px);
  transform: scale(var(--scale));
  transform-origin: center;
}

/* ===== CARD ===== */
.card{
  width:100%;
  height:100%;
  background:#fff;                /* ✅ keep white */
  border-radius:var(--radius);
  padding:16px 14px 20px;
  display:flex;
  flex-direction:column;
}

/* ===== HEADER (ARROWS + MONTH) ===== */
.header{
  display:grid;
  grid-template-columns: 44px 1fr 44px;
  align-items:center;
  gap:15px;
  margin:10px 0 54px;
}

.month{
  text-align:center;
  font-size:32px;
  letter-spacing:2px;
  text-transform:uppercase;
  line-height:1.2;
}

/* Arrow buttons */
.navbtn{
  appearance:none;
  border:none;
  background:transparent;
  cursor:pointer;
  width:44px;
  height:36px;
  display:grid;
  place-items:center;
  border-radius:12px;
  color:var(--ink);
  transition: transform .08s ease, background .2s ease;
}
.navbtn:hover{ background: rgba(0,0,0,.06); }
.navbtn:active{ transform: translateY(1px); }

.navbtn svg{
  width:18px;
  height:18px;
  stroke: var(--ink);
  stroke-width: 3;
  fill: none;
  stroke-linecap: round;
  stroke-linejoin: round;
}

/* ===== WEEKDAYS (MON → SUN) ===== */
.weekdays{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  text-align:center;
  font-size:22px;
  margin-bottom:6px;
}
.weekdays div{ opacity:.85; }

/* ===== CALENDAR GRID ===== */
.calendar{
  flex:1;                          /* fills remaining card height */
  display:grid;
  grid-template-columns:repeat(7,1fr);
  gap:14px 18px;                   /* airy like reference */
  text-align:center;
  padding: 6px 4px 0;
  align-content:start;
}

.day{
  font-size:22px;
  line-height:1;
  padding:10px 0;
  border-radius:12px;
}

.empty{ visibility:hidden; }

/* ===== TODAY (HAND-DRAWN BLACK BOX) ===== */
.today{
  position:relative;
  background:#000;
  color:#fff;
  font-weight:800;

  border-radius: 12px 22px 14px 26px;
  transform: rotate(-1.2deg);
  box-shadow: 1px 1px 0 #000;
}

.today::before{
  content:"";
  position:absolute;
  inset:3px;
  border:2px solid #000;
  border-radius: 18px 12px 22px 14px;
  transform: rotate(1.4deg);
  pointer-events:none;
}

.day span{ display:inline-block; }
.today span{ transform: rotate(1.2deg); }

/* ✅ extra safety: if Notion makes iframe super tiny, reduce gaps a bit */
@media (max-width: 360px){
  .calendar{ gap:10px 12px; }
  .day{ font-size:18px; padding:8px 0; }
  .month{ font-size:20px; }
}
</style>
</head>

<body>
  <div class="stage">
    <div class="scale-root" id="scaleRoot">
      <div class="card">

        <div class="header">
          <button class="navbtn" id="prevBtn" aria-label="Previous month" title="Previous month">
            <svg viewBox="0 0 24 24"><path d="M15 18l-6-6 6-6"/></svg>
          </button>

          <div class="month" id="monthLabel">—</div>

          <button class="navbtn" id="nextBtn" aria-label="Next month" title="Next month">
            <svg viewBox="0 0 24 24"><path d="M9 6l6 6-6 6"/></svg>
          </button>
        </div>

        <div class="weekdays">
          <div>M</div><div>T</div><div>W</div>
          <div>T</div><div>F</div><div>S</div><div>S</div>
        </div>

        <div class="calendar" id="calGrid"></div>

      </div>
    </div>
  </div>

<script>
/* ===== Auto-fit: remove scrollbars by scaling content to iframe size ===== */
function fitToViewport(){
  const root = document.documentElement;
  const baseW = parseFloat(getComputedStyle(root).getPropertyValue("--base-w")) || 560;
  const baseH = parseFloat(getComputedStyle(root).getPropertyValue("--base-h")) || 520;

  const vw = window.innerWidth;
  const vh = window.innerHeight;

  // give tiny breathing room to avoid 1px overflow (Notion sometimes adds rounding)
  const pad = 8;

  const sx = (vw - pad) / baseW;
  const sy = (vh - pad) / baseH;
  const s  = Math.min(sx, sy, 1); // never upscale beyond 1

  root.style.setProperty("--scale", String(Math.max(s, 0.5))); // clamp minimum readability
}

window.addEventListener("resize", fitToViewport);
document.addEventListener("DOMContentLoaded", fitToViewport);

/* ===== Dynamic calendar with prev/next, Monday-first, highlight TODAY only in current month ===== */
(function(){
  const monthNames = [
    "January","February","March","April","May","June",
    "July","August","September","October","November","December"
  ];

  const grid = document.getElementById("calGrid");
  const label = document.getElementById("monthLabel");
  const prevBtn = document.getElementById("prevBtn");
  const nextBtn = document.getElementById("nextBtn");

  const today = new Date();
  const todayY = today.getFullYear();
  const todayM = today.getMonth();
  const todayD = today.getDate();

  let viewY = todayY;
  let viewM = todayM;

  function daysInMonth(y, m){
    return new Date(y, m + 1, 0).getDate();
  }

  function mondayFirstOffset(y, m){
    const first = new Date(y, m, 1);
    return (first.getDay() + 6) % 7; // Mon=0 .. Sun=6
  }

  function render(){
    label.textContent = `${monthNames[viewM]} ${viewY}`.toUpperCase();
    grid.innerHTML = "";

    const offset = mondayFirstOffset(viewY, viewM);
    for(let i=0;i<offset;i++){
      const e = document.createElement("div");
      e.className = "empty";
      e.textContent = ".";
      grid.appendChild(e);
    }

    const dim = daysInMonth(viewY, viewM);
    for(let d=1; d<=dim; d++){
      const cell = document.createElement("div");
      cell.className = "day";
      cell.innerHTML = `<span>${d}</span>`;

      if(viewY === todayY && viewM === todayM && d === todayD){
        cell.classList.add("today");
      }
      grid.appendChild(cell);
    }

    // after rerender, re-fit (some months need 6 rows)
    fitToViewport();
  }

  function shiftMonth(delta){
    viewM += delta;
    if(viewM < 0){ viewM = 11; viewY -= 1; }
    if(viewM > 11){ viewM = 0; viewY += 1; }
    render();
  }

  prevBtn.addEventListener("click", () => shiftMonth(-1));
  nextBtn.addEventListener("click", () => shiftMonth(1));

  render();
})();
</script>

</body>
</html>
